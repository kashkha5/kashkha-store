<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ø§Ù„Ø³Ù„Ø© | ÙƒØ´Ø®Ø©</title>
<link rel="stylesheet" href="style.css">
<style>
  body{background:#e6f4e6;font-family:Tahoma;margin:0;padding:20px;}
  .topbar{display:flex;justify-content:space-between;margin-bottom:20px;gap:10px;}
  .topbar button,.topbar a{
    flex:1;text-align:center;background:#2a5d2a;color:#fff;padding:10px;
    border-radius:8px;text-decoration:none;font-size:18px;border:none;cursor:pointer;
  }
  .topbar a:last-child{background:#1f451f;}
  .cart-wrap{max-width:900px;margin:auto;}
  .cart-item{
    display:flex;gap:15px;align-items:center;background:#fff;padding:12px;
    border-radius:10px;margin-bottom:10px;box-shadow:0 2px 8px rgba(0,0,0,.08);
  }
  .cart-item img{width:90px;height:110px;object-fit:cover;border-radius:8px;background:#eee;}
  .cart-item h3{margin:0 0 6px 0;}
  .cart-item .meta{color:#444;font-size:15px;line-height:1.6;}
  .remove-btn{
    margin-right:auto;background:#b00020;color:#fff;border:none;
    padding:8px 10px;border-radius:6px;cursor:pointer;
  }
  .total{
    background:#1f451f;color:#fff;padding:12px;border-radius:8px;
    font-size:18px;font-weight:bold;margin-top:15px;text-align:center;
  }
  .whats-btn{
    margin-top:12px;background:#25D366;color:#fff;border:none;width:100%;
    padding:12px;border-radius:8px;font-size:18px;cursor:pointer;
  }
</style>
</head>
<body>

<div class="topbar">
  <button onclick="history.back()">â¬… Ø±Ø¬ÙˆØ¹</button>
  <a href="products.html">ğŸ“‚ Ø§Ù„ÙØ¦Ø§Øª</a>
  <a href="cart.html">ğŸ›’ Ø§Ù„Ø³Ù„Ø©</a>
</div>

<div class="cart-wrap">
  <h2 style="text-align:center;margin:20px 0;">Ø³Ù„Ø© Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª</h2>
  <div id="cart"></div>
  <div id="total" class="total" style="display:none;"></div>
  <button id="whatsBtn" class="whats-btn" style="display:none;" onclick="sendWhatsApp()">
    Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¹Ù„Ù‰ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨
  </button>
</div>

<script>
let cart = JSON.parse(localStorage.getItem("cart")) || [];

function renderCart(){
  cart = JSON.parse(localStorage.getItem("cart")) || [];
  const container = document.getElementById("cart");
  const totalBox  = document.getElementById("total");
  const whatsBtn  = document.getElementById("whatsBtn");
  container.innerHTML = "";

  if(cart.length === 0){
    container.innerHTML = "<p style='text-align:center;'>Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©</p>";
    totalBox.style.display="none";
    whatsBtn.style.display="none";
    return;
  }

  let total = 0;

  cart.forEach((p,i)=>{
    total += Number(p.price || 0);

    container.innerHTML += `
      <div class="cart-item">
        <img src="${p.img || ""}" alt="${p.name || "Ù…Ù†ØªØ¬"}">
        <div>
          <h3>${p.name || "Ù…Ù†ØªØ¬"}</h3>
          <div class="meta">
            Ø§Ù„Ù„ÙˆÙ†: ${p.color || "â€”"}<br>
            Ø§Ù„Ù…Ù‚Ø§Ø³: ${p.size || "â€”"}<br>
            Ø§Ù„Ø³Ø¹Ø±: ${p.price || 0} Ø±ÙŠØ§Ù„
          </div>
        </div>
        <button class="remove-btn" onclick="removeItem(${i})">Ø­Ø°Ù</button>
      </div>
    `;
  });

  totalBox.style.display="block";
  totalBox.innerText = `Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${total} Ø±ÙŠØ§Ù„`;
  whatsBtn.style.display="block";
}

function removeItem(i){
  cart.splice(i,1);
  localStorage.setItem("cart", JSON.stringify(cart));
  renderCart();
}

function sendWhatsApp(){
  const phone = "96872733350";
  if(cart.length === 0){ alert("Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©"); return; }

  let msg = "Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ Ù…Ù† Ù…ØªØ¬Ø± ÙƒØ´Ø®Ø©:%0A%0A";
  let total = 0;

  cart.forEach((p, idx)=>{
    total += Number(p.price || 0);
    msg += `${idx+1}) ${p.name || "Ù…Ù†ØªØ¬"} - Ù„ÙˆÙ†: ${p.color || "â€”"} - Ù…Ù‚Ø§Ø³: ${p.size || "â€”"} - Ø³Ø¹Ø±: ${p.price || 0} Ø±ÙŠØ§Ù„%0A`;
  });

  msg += `%0AØ§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${total} Ø±ÙŠØ§Ù„`;
  const url = `https://wa.me/${phone}?text=${msg}`;
  window.open(url, "_blank");
}

renderCart();
</script>

</body>
</html>
